(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{6762:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/matchups",function(){return r(7129)}])},7935:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var s=r(5893),a=r(9008),l=r.n(a),n=r(1664),o=r.n(n),c=r(1163),i=r(5675),d=r.n(i);let m=[{label:"Reset",href:"/resetandwinners"},{label:"Matchups",href:"/matchups"}];var u=()=>{let e=(0,c.useRouter)();return(0,s.jsx)("div",{className:"fixed top-0 left-0 z-20 w-full bg-zinc-900 pt-safe",children:(0,s.jsx)("header",{className:"border-b bg-zinc-100 px-safe dark:border-zinc-800 dark:bg-zinc-900",children:(0,s.jsxs)("div",{className:"mx-auto flex h-20 max-w-screen-md items-center justify-between px-6",children:[(0,s.jsx)(o(),{href:"/",children:(0,s.jsx)("h1",{className:"font-medium",children:"UIA kj\xf8rer dart"})}),(0,s.jsxs)("nav",{className:"flex items-center space-x-6",children:[(0,s.jsx)("div",{className:"hidden sm:block",children:(0,s.jsx)("div",{className:"flex items-center space-x-6",children:m.map(t=>{let{label:r,href:a}=t;return(0,s.jsx)(o(),{href:a,className:"text-sm ".concat(e.pathname===a?"text-indigo-500 dark:text-indigo-400":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-50"),children:r},r)})})}),(0,s.jsx)(d(),{src:"".concat("/DartApp","/images/icon-maskable-ico-512.png"),alt:"Uia Dart",width:48,height:48,className:"rounded-lg"})]})]})})})},h=()=>{let e=(0,c.useRouter)();return(0,s.jsx)("div",{className:"sm:hidden",children:(0,s.jsx)("nav",{className:"fixed bottom-0 w-full border-t bg-zinc-100 pb-safe dark:border-zinc-800 dark:bg-zinc-900",children:(0,s.jsx)("div",{className:"mx-auto flex h-16 max-w-md items-center justify-around px-6",children:x.map(t=>{let{href:r,label:a,icon:l}=t;return(0,s.jsxs)(o(),{href:r,className:"flex h-full w-full flex-col items-center justify-center space-y-1 ".concat(e.pathname===r?"text-indigo-500 dark:text-indigo-400":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-50"),children:[l,(0,s.jsx)("span",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:a})]},a)})})})})};let x=[{label:"Home",href:"/",icon:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"lucide lucide-house",children:[(0,s.jsx)("path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}),(0,s.jsx)("path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"})]})},{label:"Reset",href:"/resetandwinners",icon:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"lucide lucide-rotate-ccw",children:[(0,s.jsx)("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),(0,s.jsx)("path",{d:"M3 3v5h5"})]})},{label:"Matchups",href:"/matchups",icon:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",className:"lucide lucide-swords",children:[(0,s.jsx)("polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5"}),(0,s.jsx)("line",{x1:"13",x2:"19",y1:"19",y2:"13"}),(0,s.jsx)("line",{x1:"16",x2:"20",y1:"16",y2:"20"}),(0,s.jsx)("line",{x1:"19",x2:"21",y1:"21",y2:"19"}),(0,s.jsx)("polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5"}),(0,s.jsx)("line",{x1:"5",x2:"9",y1:"14",y2:"18"}),(0,s.jsx)("line",{x1:"7",x2:"4",y1:"17",y2:"20"}),(0,s.jsx)("line",{x1:"3",x2:"5",y1:"19",y2:"21"})]})}];var g=e=>{let{title:t,children:r}=e;return(0,s.jsxs)(s.Fragment,{children:[t?(0,s.jsx)(l(),{children:(0,s.jsxs)("title",{children:["Dart Kj\xf8ret | ",t]})}):null,(0,s.jsx)(u,{}),(0,s.jsx)("main",{className:"mx-auto max-w-screen-md pt-20 pb-16 px-safe sm:pb-0",children:(0,s.jsx)("div",{className:"p-6",children:r})}),(0,s.jsx)(h,{})]})}},4043:function(e,t,r){"use strict";var s=r(5893);t.Z=e=>{let{children:t}=e;return(0,s.jsx)("section",{className:"mt-10",children:t})}},7129:function(e,t,r){"use strict";r.r(t);var s=r(5893),a=r(7294),l=r(1163),n=r(7935),o=r(4043),c=r(8577);t.default=()=>{let e=(0,l.useRouter)(),[t,r]=(0,a.useState)([]),[i,d]=(0,a.useState)([]),[m,u]=(0,a.useState)([]),[h,x]=(0,a.useState)([]),[g,f]=(0,a.useState)([]),[p,j]=(0,a.useState)({}),[w,N]=(0,a.useState)(0),[v,b]=(0,a.useState)({});(0,a.useEffect)(()=>{u(JSON.parse(localStorage.getItem("players")||"[]")),x(JSON.parse(localStorage.getItem("courts")||"[]")),r(JSON.parse(localStorage.getItem("matchups")||"[]")),d(JSON.parse(localStorage.getItem("onBreak")||"[]")),f(JSON.parse(localStorage.getItem("pastPairs")||"[]"));let e=localStorage.getItem("matchWinners");e&&j(JSON.parse(e));let t=localStorage.getItem("roundCount");t&&N(parseInt(t,10));let s=localStorage.getItem("wins");s&&b(JSON.parse(s))},[]);let[S,y]=(0,a.useState)([]);(0,a.useEffect)(()=>{let e=localStorage.getItem("matchups");e?y(JSON.parse(e)):y([])},[]);let[k,I]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let e=new Date().toDateString();localStorage.getItem("sessionDate")!==e&&I(!0)},[]);let z=()=>{let e=new Date().toDateString();localStorage.setItem("sessionDate",e)},O=()=>{z(),localStorage.setItem("courts",JSON.stringify(["Bane 1","Bane 2","Bane 3","Bane 4"])),localStorage.removeItem("matchups"),localStorage.removeItem("onBreak"),localStorage.removeItem("pastTeams"),localStorage.removeItem("pastPairs"),localStorage.removeItem("lastRoundPlayers"),localStorage.removeItem("pastBreaks"),localStorage.removeItem("breakCounts"),localStorage.removeItem("roundCount"),localStorage.removeItem("currentCount"),localStorage.removeItem("matchWinners"),localStorage.removeItem("wins"),window.location.reload()};(e=>{let t={},r={};return e.forEach(e=>{let s=[...e].sort(),a=s.join(" - ");t[a]=(t[a]||0)+1,r[a]=s}),Object.keys(t).filter(e=>t[e]>1).map(e=>r[e])})(g);let C=(e,r,s)=>{let a="".concat(e,"-").concat(r),l=p[a],n={...v},o=t[e];if(!o)return;let c=o.matches[r];if(!c)return;let i=(e,t)=>{e.forEach(e=>{n[e]=(n[e]||0)+t,n[e]<0&&(n[e]=0)})};l&&l!==s?("left"===l?i(c.team1,-1):"right"===l&&i(c.team2,-1),i("left"===s?c.team1:c.team2,1)):l||i("left"===s?c.team1:c.team2,1),b(n),localStorage.setItem("wins",JSON.stringify(n));let d={...p,[a]:s};j(d),localStorage.setItem("matchWinners",JSON.stringify(d))};function J(e){if(!e)return 0;let t=e.match(/\d+/);return t?parseInt(t[0],10):0}return(0,s.jsx)(n.Z,{children:(0,s.jsxs)(o.Z,{children:[(0,s.jsxs)("div",{className:"max-w-lg mx-auto space-y-6 no-scrollbar overflow-y-auto",children:[w>9&&(0,s.jsxs)("div",{className:"bg-red-500 text-white p-4 rounded-md",children:[(0,s.jsx)("p",{className:"text-center font-bold",children:"Hei! Du har spilt over 10 runder. Er det p\xe5 tide \xe5 resette?"}),(0,s.jsx)("div",{className:"text-center mt-2",children:(0,s.jsx)("button",{onClick:()=>e.push("/resetandwinners"),className:"px-4 py-2 bg-white text-red-500 font-semibold rounded-md hover:bg-red-100",children:"Nullstill \xf8kt"})})]}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-center",children:"Matchups"}),t.length>0?t.slice().sort((e,t)=>J(e.court)-J(t.court)).map((e,t)=>(0,s.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg shadow-lg space-y-4",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold text-center text-white",children:e.court}),e.matches.length>0?e.matches.map((e,r)=>{let a="".concat(t,"-").concat(r);return(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 bg-gray-700 p-4 rounded-md shadow-md",children:[(0,s.jsx)("div",{onClick:()=>C(t,r,"left"),className:"flex flex-col items-center w-full sm:w-1/2 cursor-pointer\n                              rounded-md transition-colors duration-300 p-2\n                              ".concat("left"===p[a]?"bg-green-600":"bg-gray-800","\n                            "),children:e.team1.map((e,t)=>(0,s.jsx)("p",{className:"text-white font-medium md:text-base lg:text-sm text-center w-full sm:max-w-full whitespace-normal break-normal",children:e},t))}),(0,s.jsx)("div",{className:"text-white text-3xl font-bold flex items-center justify-center -mt-3 -mb-2",children:"\uD83C\uDFAF"}),(0,s.jsx)("div",{onClick:()=>C(t,r,"right"),className:"flex flex-col items-center w-full sm:w-1/2 cursor-pointer\n                              rounded-md transition-colors duration-300 p-2\n                              ".concat("right"===p[a]?"bg-green-600":"bg-gray-800","\n                            "),children:e.team2.map((e,t)=>(0,s.jsx)("p",{className:"text-white font-medium md:text-base lg:text-sm text-center w-full sm:max-w-full whitespace-normal break-normal",children:e},t))})]},r)}):(0,s.jsx)("p",{className:"text-gray-400 text-center",children:"No matches found for this court"})]},t)):(0,s.jsx)("p",{className:"text-gray-400 text-center",children:"Ingen kamper funnet. G\xe5 tilbake og generer lag!"}),i.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-center text-white mb-3 flex items-center justify-center gap-2",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",className:"w-5 h-5",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M6 4h4v16H6V4zm8 0h4v16h-4V4z",clipRule:"evenodd"})}),"P\xe5 pause"]}),(0,s.jsx)("div",{className:"flex flex-wrap justify-center",children:(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:i.map((e,t)=>(0,s.jsx)("span",{className:"w-[140px] sm:h-14 h-12 flex items-center justify-center bg-red-500 text-white font-medium text-sm sm:text-base rounded-md shadow-md text-center px-2",children:e},t))})})]}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("button",{onClick:()=>{let e=w+1;if(N(e),localStorage.setItem("roundCount",e.toString()),localStorage.removeItem("matchWinners"),j({}),m.length<4){alert("Not enough players to generate teams.");return}let{matchups:t,onBreak:s}=(0,c.u)(m,h);r(t),d(s),f(JSON.parse(localStorage.getItem("pastPairs")||"[]"))},className:"mt-6 px-6 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"Generer nytt spill"})})]}),k&&(0,s.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,s.jsxs)("div",{className:"bg-zinc-900 p-6 rounded-lg shadow-lg w-96",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Vil du resette data?"}),(0,s.jsx)("p",{className:"text-sm text-white-600 mt-2",children:"Hei, det er en dag siden sist du spilte. Vil du resette data?"}),(0,s.jsxs)("div",{className:"mt-6 flex justify-end gap-4",children:[(0,s.jsx)("button",{className:"px-4 py-2 text-white-700 border border-gray-300 rounded-md hover:bg-gray-100",onClick:()=>{z(),I(!1)},children:"Avbryt"}),(0,s.jsx)("button",{className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",onClick:()=>{O(),I(!1)},children:"Ja, reset data"})]})]})})]})})}},8577:function(e,t,r){"use strict";function s(e,t,r){return r.some(r=>r.includes(e)&&r.includes(t))}function a(e){let t=[...e];for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}r.d(t,{u:function(){return n}});let l=function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2],e.length<2)return[];let r=0;for(;r<3;){for(let r=0;r<e.length-1;r++)for(let a=r+1;a<e.length;a++)if(!s(e[r],e[a],t)){let s=[e[r],e[a]];return e.splice(a,1),e.splice(r,1),t.push(s),s}e.sort(()=>Math.random()-.5),r++}let a=e.pop(),l=e.pop();return console.log("⚠️ No unique pairs found after ".concat(3," attempts. Allowing repeat: ").concat(a," and ").concat(l)),t.push([a,l]),[a,l]},n=(e,t)=>{let r=JSON.parse(localStorage.getItem("pastPairs")||"[]"),n=JSON.parse(localStorage.getItem("breakCounts")||"{}");e=e.filter(e=>""!==e.trim());let o=Object.values(n),c=o.length>0?Math.max(...o):0;e.forEach(e=>{void 0===n[e]&&(n[e]=c)});let i=e.sort((e,t)=>n[t]-n[e]),d=Math.floor(i.length/4),m=t.slice(0,d),u=4*m.length,h=i.slice(0,u);h=a(h);let x=i.slice(u),g=function(e,t,r){if(e.length<4*t)return null;let l=Array(t);return!function e(n,o){if(n===t)return!0;for(let t of a(function(e,t){let r=[];return!function t(s,a){if(4===a.length){r.push([...a]);return}for(let r=s;r<e.length;r++)a.push(e[r]),t(r+1,a),a.pop()}(0,[]),r}(o,0)))for(let[c,i,d,m]of a([[t[0],t[1],t[2],t[3]],[t[0],t[2],t[1],t[3]],[t[0],t[3],t[1],t[2]]]))if(!s(c,i,r)&&!s(d,m,r)){if(r.push([c,i]),r.push([d,m]),l[n]={team1:[c,i],team2:[d,m]},e(n+1,o.filter(e=>!t.includes(e))))return!0;r.pop(),r.pop()}return!1}(0,e)?null:l}(h,m.length,r);if(null===g){console.warn("No arrangement without repeats was found. Falling back to repeated pairs...");let e=[],t=a([...h]);for(;e.length<m.length&&t.length>=4;){let s=l(t,r,!0),a=l(t,r,!0);if(0===s.length||0===a.length)break;e.push({team1:s,team2:a})}g=e}let f=g.map((e,t)=>({court:m[t],matches:[e]}));return x.forEach(e=>{n[e]=(n[e]||0)+1}),localStorage.setItem("matchups",JSON.stringify(f)),localStorage.setItem("onBreak",JSON.stringify(x)),localStorage.setItem("pastPairs",JSON.stringify(r)),localStorage.setItem("breakCounts",JSON.stringify(n)),{matchups:f,onBreak:x}}}},function(e){e.O(0,[247,888,774,179],function(){return e(e.s=6762)}),_N_E=e.O()}]);