(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[53],{6762:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/matchups",function(){return r(7129)}])},7935:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var a=r(5893),s=r(9008),n=r.n(s),l=r(1664),o=r.n(l),c=r(1163);let i=[{label:"Reset",href:"/resetandwinners"},{label:"Matchups",href:"/matchups"}];var m=()=>{let e=(0,c.useRouter)();return(0,a.jsx)("div",{className:"fixed top-0 left-0 z-20 w-full bg-zinc-900 pt-safe",children:(0,a.jsx)("header",{className:"border-b bg-zinc-100 px-safe dark:border-zinc-800 dark:bg-zinc-900",children:(0,a.jsxs)("div",{className:"mx-auto flex h-20 max-w-screen-md items-center justify-between px-6",children:[(0,a.jsx)(o(),{href:"/",children:(0,a.jsx)("h1",{className:"font-medium",children:"UIA kj\xf8rer dart"})}),(0,a.jsxs)("nav",{className:"flex items-center space-x-6",children:[(0,a.jsx)("div",{className:"hidden sm:block",children:(0,a.jsx)("div",{className:"flex items-center space-x-6",children:i.map(t=>{let{label:r,href:s}=t;return(0,a.jsx)(o(),{href:s,className:"text-sm ".concat(e.pathname===s?"text-indigo-500 dark:text-indigo-400":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-50"),children:r},r)})})}),(0,a.jsx)("div",{title:"Uia Dart",className:"h-12 w-12 bg-cover bg-center rounded-lg",style:{backgroundImage:"url(/images/icon-maskable-ico-512.png)"}})]})]})})})},d=()=>{let e=(0,c.useRouter)();return(0,a.jsx)("div",{className:"sm:hidden",children:(0,a.jsx)("nav",{className:"fixed bottom-0 w-full border-t bg-zinc-100 pb-safe dark:border-zinc-800 dark:bg-zinc-900",children:(0,a.jsx)("div",{className:"mx-auto flex h-16 max-w-md items-center justify-around px-6",children:u.map(t=>{let{href:r,label:s,icon:n}=t;return(0,a.jsxs)(o(),{href:r,className:"flex h-full w-full flex-col items-center justify-center space-y-1 ".concat(e.pathname===r?"text-indigo-500 dark:text-indigo-400":"text-zinc-600 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-50"),children:[n,(0,a.jsx)("span",{className:"text-xs text-zinc-600 dark:text-zinc-400",children:s})]},s)})})})})};let u=[{label:"Home",href:"/",icon:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-house",children:[(0,a.jsx)("path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"}),(0,a.jsx)("path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"})]})},{label:"Reset",href:"/resetandwinners",icon:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-rotate-ccw",children:[(0,a.jsx)("path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}),(0,a.jsx)("path",{d:"M3 3v5h5"})]})},{label:"Matchups",href:"/matchups",icon:(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-swords",children:[(0,a.jsx)("polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5"}),(0,a.jsx)("line",{x1:"13",x2:"19",y1:"19",y2:"13"}),(0,a.jsx)("line",{x1:"16",x2:"20",y1:"16",y2:"20"}),(0,a.jsx)("line",{x1:"19",x2:"21",y1:"21",y2:"19"}),(0,a.jsx)("polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5"}),(0,a.jsx)("line",{x1:"5",x2:"9",y1:"14",y2:"18"}),(0,a.jsx)("line",{x1:"7",x2:"4",y1:"17",y2:"20"}),(0,a.jsx)("line",{x1:"3",x2:"5",y1:"19",y2:"21"})]})}];var h=e=>{let{title:t,children:r}=e;return(0,a.jsxs)(a.Fragment,{children:[t?(0,a.jsx)(n(),{children:(0,a.jsxs)("title",{children:["Dart Kj\xf8ret | ",t]})}):null,(0,a.jsx)(m,{}),(0,a.jsx)("main",{className:"mx-auto max-w-screen-md pt-20 pb-16 px-safe sm:pb-0",children:(0,a.jsx)("div",{className:"p-6",children:r})}),(0,a.jsx)(d,{})]})}},4043:function(e,t,r){"use strict";var a=r(5893);t.Z=e=>{let{children:t}=e;return(0,a.jsx)("section",{className:"mt-10",children:t})}},7129:function(e,t,r){"use strict";r.r(t);var a=r(5893),s=r(7294),n=r(1163),l=r(7935),o=r(4043),c=r(8577);t.default=()=>{let e=(0,n.useRouter)(),[t,r]=(0,s.useState)([]),[i,m]=(0,s.useState)([]),[d,u]=(0,s.useState)([]),[h,x]=(0,s.useState)([]),[g,f]=(0,s.useState)([]),[p,j]=(0,s.useState)({}),[w,N]=(0,s.useState)(0),[b,v]=(0,s.useState)({});(0,s.useEffect)(()=>{u(JSON.parse(localStorage.getItem("players")||"[]")),x(JSON.parse(localStorage.getItem("courts")||"[]")),r(JSON.parse(localStorage.getItem("matchups")||"[]")),m(JSON.parse(localStorage.getItem("onBreak")||"[]")),f(JSON.parse(localStorage.getItem("pastPairs")||"[]"));let e=localStorage.getItem("matchWinners");e&&j(JSON.parse(e));let t=localStorage.getItem("roundCount");t&&N(parseInt(t,10));let a=localStorage.getItem("wins");a&&v(JSON.parse(a))},[]),(0,s.useEffect)(()=>{(function(){let e=new Date().toDateString();localStorage.getItem("sessionDate")!==e&&(window.confirm("Hei, det er en dag siden sist du spillte, vil du resette data?")&&(localStorage.setItem("courts",JSON.stringify(["Bane 1","Bane 2","Bane 3","Bane 4"])),localStorage.removeItem("matchups"),localStorage.removeItem("onBreak"),localStorage.removeItem("pastTeams"),localStorage.removeItem("pastPairs"),localStorage.removeItem("lastRoundPlayers"),localStorage.removeItem("pastBreaks"),localStorage.removeItem("breakCounts"),localStorage.removeItem("roundCount"),localStorage.removeItem("currentCount"),localStorage.removeItem("matchWinners"),localStorage.removeItem("wins"),console.log("Pairing data has been reset.")),localStorage.setItem("sessionDate",e))})()},[]),(e=>{let t={},r={};return e.forEach(e=>{let a=[...e].sort(),s=a.join(" - ");t[s]=(t[s]||0)+1,r[s]=a}),Object.keys(t).filter(e=>t[e]>1).map(e=>r[e])})(g);let S=(e,r,a)=>{let s="".concat(e,"-").concat(r),n=p[s],l={...b},o=t[e];if(!o)return;let c=o.matches[r];if(!c)return;let i=(e,t)=>{e.forEach(e=>{l[e]=(l[e]||0)+t,l[e]<0&&(l[e]=0)})};n&&n!==a?("left"===n?i(c.team1,-1):"right"===n&&i(c.team2,-1),i("left"===a?c.team1:c.team2,1)):n||i("left"===a?c.team1:c.team2,1),v(l),localStorage.setItem("wins",JSON.stringify(l));let m={...p,[s]:a};j(m),localStorage.setItem("matchWinners",JSON.stringify(m))};function k(e){if(!e)return 0;let t=e.match(/\d+/);return t?parseInt(t[0],10):0}return(0,a.jsx)(l.Z,{children:(0,a.jsx)(o.Z,{children:(0,a.jsxs)("div",{className:"max-w-md mx-auto space-y-6 no-scrollbar overflow-y-auto",children:[w>9&&(0,a.jsxs)("div",{className:"bg-red-500 text-white p-4 rounded-md",children:[(0,a.jsx)("p",{className:"text-center font-bold",children:"Hei! Du har spilt over 10 runder. Er det p\xe5 tide \xe5 resette?"}),(0,a.jsx)("div",{className:"text-center mt-2",children:(0,a.jsx)("button",{onClick:()=>e.push("/resetandwinners"),className:"px-4 py-2 bg-white text-red-500 font-semibold rounded-md hover:bg-red-100",children:"Nullstill \xf8kt"})})]}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-center",children:"Matchups"}),t.length>0?t.slice().sort((e,t)=>k(e.court)-k(t.court)).map((e,t)=>(0,a.jsxs)("div",{className:"bg-gray-800 p-4 rounded-lg shadow-lg space-y-4",children:[(0,a.jsx)("h3",{className:"text-xl font-semibold text-center text-white",children:e.court}),e.matches.length>0?e.matches.map((e,r)=>{let s="".concat(t,"-").concat(r);return(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center gap-4 bg-gray-700 p-4 rounded-md shadow-md",children:[(0,a.jsx)("div",{onClick:()=>S(t,r,"left"),className:"flex flex-col items-center w-full sm:w-1/2 cursor-pointer\n                              rounded-md transition-colors duration-300 p-2\n                              ".concat("left"===p[s]?"bg-green-700":"bg-gray-800","\n                            "),children:e.team1.map((e,t)=>(0,a.jsx)("p",{className:"text-white font-medium md:text-base lg:text-sm text-center w-full sm:max-w-full whitespace-normal break-normal",children:e},t))}),(0,a.jsx)("div",{className:"text-white text-3xl font-bold flex items-center justify-center -mt-3 -mb-2",children:"\uD83C\uDFAF"}),(0,a.jsx)("div",{onClick:()=>S(t,r,"right"),className:"flex flex-col items-center w-full sm:w-1/2 cursor-pointer\n                              rounded-md transition-colors duration-300 p-2\n                              ".concat("right"===p[s]?"bg-green-700":"bg-gray-800","\n                            "),children:e.team2.map((e,t)=>(0,a.jsx)("p",{className:"text-white font-medium md:text-base lg:text-sm text-center w-full sm:max-w-full whitespace-normal break-normal",children:e},t))})]},r)}):(0,a.jsx)("p",{className:"text-gray-400 text-center",children:"No matches found for this court"})]},t)):(0,a.jsx)("p",{className:"text-gray-400 text-center",children:"No matchups found. Go back and generate teams!"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-center",children:"P\xe5 pause"}),(0,a.jsx)("div",{className:"flex flex-wrap justify-center gap-4",children:i.map((e,t)=>(0,a.jsx)("span",{className:"py-2 px-2 flex items-center justify-center bg-red-500 text-white font-medium text-sm rounded-md shadow-md text-center whitespace-normal break-normal",children:e},t))}),(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("button",{onClick:()=>{let e=w+1;if(N(e),localStorage.setItem("roundCount",e.toString()),localStorage.removeItem("matchWinners"),j({}),d.length<4){alert("Not enough players to generate teams.");return}let{matchups:t,onBreak:a}=(0,c.u)(d,h);r(t),m(a),f(JSON.parse(localStorage.getItem("pastPairs")||"[]"))},className:"mt-6 px-6 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"Generer nytt spill"})})]})})})}},8577:function(e,t,r){"use strict";function a(e,t,r){return r.some(r=>r.includes(e)&&r.includes(t))}function s(e){let t=[...e];for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}r.d(t,{u:function(){return l}});let n=function(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2],e.length<2)return[];let r=0;for(;r<3;){for(let r=0;r<e.length-1;r++)for(let s=r+1;s<e.length;s++)if(!a(e[r],e[s],t)){let a=[e[r],e[s]];return e.splice(s,1),e.splice(r,1),t.push(a),a}e.sort(()=>Math.random()-.5),r++}let s=e.pop(),n=e.pop();return console.log("⚠️ No unique pairs found after ".concat(3," attempts. Allowing repeat: ").concat(s," and ").concat(n)),t.push([s,n]),[s,n]},l=(e,t)=>{let r=JSON.parse(localStorage.getItem("pastPairs")||"[]"),l=JSON.parse(localStorage.getItem("breakCounts")||"{}");e=e.filter(e=>""!==e.trim());let o=Object.values(l),c=o.length>0?Math.max(...o):0;e.forEach(e=>{void 0===l[e]&&(l[e]=c)});let i=e.sort((e,t)=>l[t]-l[e]),m=Math.floor(i.length/4),d=t.slice(0,m),u=4*d.length,h=i.slice(0,u);h=s(h);let x=i.slice(u),g=function(e,t,r){if(e.length<4*t)return null;let n=Array(t);return!function e(l,o){if(l===t)return!0;for(let t of s(function(e,t){let r=[];return!function t(a,s){if(4===s.length){r.push([...s]);return}for(let r=a;r<e.length;r++)s.push(e[r]),t(r+1,s),s.pop()}(0,[]),r}(o,0)))for(let[c,i,m,d]of s([[t[0],t[1],t[2],t[3]],[t[0],t[2],t[1],t[3]],[t[0],t[3],t[1],t[2]]]))if(!a(c,i,r)&&!a(m,d,r)){if(r.push([c,i]),r.push([m,d]),n[l]={team1:[c,i],team2:[m,d]},e(l+1,o.filter(e=>!t.includes(e))))return!0;r.pop(),r.pop()}return!1}(0,e)?null:n}(h,d.length,r);if(null===g){console.warn("No arrangement without repeats was found. Falling back to repeated pairs...");let e=[],t=s([...h]);for(;e.length<d.length&&t.length>=4;){let a=n(t,r,!0),s=n(t,r,!0);if(0===a.length||0===s.length)break;e.push({team1:a,team2:s})}g=e}let f=g.map((e,t)=>({court:d[t],matches:[e]}));return x.forEach(e=>{l[e]=(l[e]||0)+1}),localStorage.setItem("matchups",JSON.stringify(f)),localStorage.setItem("onBreak",JSON.stringify(x)),localStorage.setItem("pastPairs",JSON.stringify(r)),localStorage.setItem("breakCounts",JSON.stringify(l)),{matchups:f,onBreak:x}}}},function(e){e.O(0,[996,888,774,179],function(){return e(e.s=6762)}),_N_E=e.O()}]);